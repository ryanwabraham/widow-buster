function containsChildNode(e){for(let n=0;n<e.childNodes.length;n++)if(1==e.childNodes[n].nodeType)return!0;return!1}function findLastWordIndex(e){for(let n=e.length-1;n>0;n--)if(""!=e[n])return n;return!1}function findNodesToWidowBust(e){let n=e,o=new Set;for(;n.length;){const e=n.shift();o.add(e),e.childNodes.forEach(e=>{isDomNode(e)&&!n.includes(e)&&n.push(e)})}return o}function fixWidows(e){e.forEach(e=>{containsChildNode(e)?fixWidowsInTextNodes(e):fixWidowInDomElement(e)})}function fixWidowInDomElement(e){const n=e.childNodes[0].nodeValue.trim().split(" ");if(n.length>1){const o="&nbsp;"+n.pop();e.innerHTML=n.join(" ")+o}}function fixWidowsInTextNodes(e){e.childNodes.forEach(e=>{if(isTextNode(e)){let n=e.nodeValue.split(" "),o="Â ";if(n.length>1){if(""==n[n.length-1]){const e=findLastWordIndex(n);e&&n.splice(e,0,o)}else n.splice(-1,0,o);const i=joinArray(n,o);e.nodeValue=i}}})}function isDomNode(e){return!(1!=e.nodeType||!e.childNodes.length||"SCRIPT"===e.tagName)}function isTextNode(e){return 3==e.nodeType}function joinArray(e,n){let o="";return e.forEach((i,t)=>{i!==n&&e[t+1]!==n&&""!==e[t+1]?o+=i+" ":o+=i}),o}function widowBuster(e){let n=[];e.forEach(e=>{n.push(Array.from(document.querySelectorAll(e)))});const o=findNodesToWidowBust(n.flat(1));o.size&&fixWidows(o)}
